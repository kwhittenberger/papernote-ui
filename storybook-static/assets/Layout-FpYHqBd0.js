import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as f}from"./iframe-DvQbZzpK.js";const y=({className:c="",sections:t})=>{const[d,m]=f.useState([]),[p,r]=f.useState(""),i=t&&t.length>0?t:d;console.log("üéØ PageNavigation render:",{externalSections:t||"none",externalSectionsLength:t?.length||0,detectedSections:d||"none",detectedSectionsLength:d.length,sections:i||"none",sectionsLength:i.length}),f.useEffect(()=>{if(t!==void 0)return;const e=()=>{const n=document.querySelectorAll('[id^="section-"], [data-section]'),a=[];n.forEach(l=>{const u=l.id||l.getAttribute("data-section")||"",g=l.getAttribute("aria-label")||l.getAttribute("data-label")||u;u&&a.push({id:u,label:g})}),m(a),a.length>0&&r(a[0].id)};e();const o=new MutationObserver(e);return o.observe(document.body,{childList:!0,subtree:!0}),()=>o.disconnect()},[t]),f.useEffect(()=>{if(t&&t.length>0){t.length>0&&r(t[0].id);return}const e=()=>document.querySelector(".flex-1.overflow-auto")||null,o=()=>{const a=e();if(!a)return;const l=a.scrollTop,u=a.scrollHeight,g=a.clientHeight,S=a.getBoundingClientRect().top;if(l+g>=u-100&&i.length>0){r(i[i.length-1].id);return}for(const h of i){const v=document.getElementById(h.id)||document.querySelector(`[data-section="${h.id}"]`);if(v){const N=v.getBoundingClientRect(),x=N.top-S,_=x+N.height;if(x<=200&&_>200){r(h.id);break}}}},n=e();if(n)return n.addEventListener("scroll",o),o(),()=>n.removeEventListener("scroll",o)},[i]);const b=e=>{if(t&&t.length>0){const n=document.querySelector('iframe[title="Conductor Admin"]');n&&n.contentWindow&&n.contentWindow.postMessage({type:"SCROLL_TO_SECTION",sectionId:e},"*"),r(e);return}const o=document.getElementById(e)||document.querySelector(`[data-section="${e}"]`);if(o){const n=document.querySelector(".flex-1.overflow-auto");if(n){const a=o.offsetTop-n.offsetTop;n.scrollTo({top:a-100,behavior:"smooth"})}else o.scrollIntoView({behavior:"smooth",block:"start"});r(e)}};return i.length===0?null:s.jsx("nav",{className:c,"aria-label":"Page sections",children:s.jsx("div",{className:"flex flex-col gap-2 items-center",children:i.map(e=>s.jsx("div",{className:`page-nav-dot ${p===e.id?"active":""}`,role:"button",tabIndex:0,"aria-label":e.label,title:e.label,onClick:()=>b(e.id),onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),b(e.id))}},e.id))})})};try{y.displayName="PageNavigation",y.__docgenInfo={description:"",displayName:"PageNavigation",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},sections:{defaultValue:null,description:"External sections to display (overrides auto-detection)",name:"sections",required:!1,type:{name:"Section[]"}}}}}catch{}const w=({sidebar:c,children:t,statusBar:d,className:m="",sections:p})=>(console.log("üèóÔ∏è Layout render with sections:",p),s.jsxs("div",{className:`h-screen flex flex-col bg-paper-100 ${m}`,children:[s.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[c,s.jsx("div",{className:"w-8 h-full bg-paper-100 flex-shrink-0 relative flex items-center justify-center",children:s.jsx(y,{sections:p})}),s.jsx("div",{className:"flex-1 overflow-auto",children:t})]}),d]}));try{w.displayName="Layout",w.__docgenInfo={description:`Layout - Complete application layout with sidebar, gutter, and scrollable content

The top-level layout component that creates the classic notebook application structure:
- **Sidebar** - Fixed 256px wide navigation sidebar with notebook binding effect
- **Gutter** - 32px space between sidebar and content, contains page navigation dots
- **Content area** - Flexible, independently scrollable main content region
- **Status bar** - Optional fixed bar at the bottom for status information

The gutter contains PageNavigation dots that automatically track scroll position when sections
are provided. This creates the table-of-contents navigation experience.`,displayName:"Layout",props:{sidebar:{defaultValue:null,description:"Sidebar content - typically the Sidebar component with navigation items",name:"sidebar",required:!0,type:{name:"ReactNode"}},children:{defaultValue:null,description:"Main page content - wrap in Page or PageLayout components for notebook styling",name:"children",required:!0,type:{name:"ReactNode"}},statusBar:{defaultValue:null,description:"Optional status bar component displayed at the bottom of the layout",name:"statusBar",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"Additional CSS classes to apply to the layout container",name:"className",required:!1,type:{name:"string"}},sections:{defaultValue:null,description:"Page sections for navigation dots in the gutter (auto-detected from section IDs in content)",name:"sections",required:!1,type:{name:"Section[]"}}}}}catch{}export{w as L};

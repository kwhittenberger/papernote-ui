import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as m}from"./iframe-BKwLVrTx.js";const y=({className:l="",sections:t})=>{const[d,f]=m.useState([]),[p,r]=m.useState(""),i=t&&t.length>0?t:d;console.log("üéØ PageNavigation render:",{externalSections:t||"none",externalSectionsLength:t?.length||0,detectedSections:d||"none",detectedSectionsLength:d.length,sections:i||"none",sectionsLength:i.length}),m.useEffect(()=>{if(t!==void 0)return;const e=()=>{const o=document.querySelectorAll('[id^="section-"], [data-section]'),a=[];o.forEach(c=>{const u=c.id||c.getAttribute("data-section")||"",g=c.getAttribute("aria-label")||c.getAttribute("data-label")||u;u&&a.push({id:u,label:g})}),f(a),a.length>0&&r(a[0].id)};e();const n=new MutationObserver(e);return n.observe(document.body,{childList:!0,subtree:!0}),()=>n.disconnect()},[t]),m.useEffect(()=>{if(t&&t.length>0){t.length>0&&r(t[0].id);return}const e=()=>document.querySelector(".flex-1.overflow-auto")||null,n=()=>{const a=e();if(!a)return;const c=a.scrollTop,u=a.scrollHeight,g=a.clientHeight,S=a.getBoundingClientRect().top;if(c+g>=u-100&&i.length>0){r(i[i.length-1].id);return}for(const h of i){const b=document.getElementById(h.id)||document.querySelector(`[data-section="${h.id}"]`);if(b){const N=b.getBoundingClientRect(),x=N.top-S,_=x+N.height;if(x<=200&&_>200){r(h.id);break}}}},o=e();if(o)return o.addEventListener("scroll",n),n(),()=>o.removeEventListener("scroll",n)},[i]);const v=e=>{if(t&&t.length>0){const o=document.querySelector('iframe[title="Conductor Admin"]');o&&o.contentWindow&&o.contentWindow.postMessage({type:"SCROLL_TO_SECTION",sectionId:e},"*"),r(e);return}const n=document.getElementById(e)||document.querySelector(`[data-section="${e}"]`);if(n){const o=document.querySelector(".flex-1.overflow-auto");if(o){const a=n.offsetTop-o.offsetTop;o.scrollTo({top:a-100,behavior:"smooth"})}else n.scrollIntoView({behavior:"smooth",block:"start"});r(e)}};return i.length===0?null:s.jsx("nav",{className:`page-nav ${l}`,"aria-label":"Page sections",children:s.jsx("div",{className:"page-nav-dots",children:i.map(e=>s.jsx("div",{className:`page-nav-dot ${p===e.id?"active":""}`,role:"button",tabIndex:0,"aria-label":e.label,title:e.label,onClick:()=>v(e.id),onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),v(e.id))}},e.id))})})};try{y.displayName="PageNavigation",y.__docgenInfo={description:"",displayName:"PageNavigation",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},sections:{defaultValue:null,description:"External sections to display (overrides auto-detection)",name:"sections",required:!1,type:{name:"Section[]"}}}}}catch{}const w=({sidebar:l,children:t,statusBar:d,className:f="",sections:p})=>(console.log("üèóÔ∏è Layout render with sections:",p),s.jsxs("div",{className:`h-screen flex flex-col bg-paper-100 ${f}`,children:[s.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[l,s.jsx("div",{className:"w-8 h-full bg-paper-100 flex-shrink-0 relative flex items-center justify-center",children:s.jsx(y,{sections:p})}),s.jsx("div",{className:"flex-1 overflow-auto",children:t})]}),d]}));try{w.displayName="Layout",w.__docgenInfo={description:`Layout - Complete application layout with sidebar, gutter, and scrollable content

The top-level layout component that creates the classic notebook application structure:
- **Sidebar** - Fixed 256px wide navigation sidebar with notebook binding effect
- **Gutter** - 32px space between sidebar and content, contains page navigation dots
- **Content area** - Flexible, independently scrollable main content region
- **Status bar** - Optional fixed bar at the bottom for status information

The gutter contains PageNavigation dots that automatically track scroll position when sections
are provided. This creates the table-of-contents navigation experience.`,displayName:"Layout",props:{sidebar:{defaultValue:null,description:"Sidebar content - typically the Sidebar component with navigation items",name:"sidebar",required:!0,type:{name:"ReactNode"}},children:{defaultValue:null,description:"Main page content - wrap in Page or PageLayout components for notebook styling",name:"children",required:!0,type:{name:"ReactNode"}},statusBar:{defaultValue:null,description:"Optional status bar component displayed at the bottom of the layout",name:"statusBar",required:!1,type:{name:"ReactNode"}},className:{defaultValue:{value:""},description:"Additional CSS classes to apply to the layout container",name:"className",required:!1,type:{name:"string"}},sections:{defaultValue:null,description:"Page sections for navigation dots in the gutter (auto-detected from section IDs in content)",name:"sections",required:!1,type:{name:"Section[]"}}}}}catch{}export{w as L};

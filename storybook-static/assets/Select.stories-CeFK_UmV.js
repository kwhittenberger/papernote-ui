import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as l}from"./iframe-BKwLVrTx.js";import{L as se}from"./loader-circle-Dn0VX4sB.js";import{X as Se}from"./x-B1I68jKP.js";import{C as ye}from"./chevron-down-CpEQ32Ko.js";import{S as Ce}from"./search-BNAmVFQw.js";import{C as J}from"./check-5riZdh2p.js";import"./preload-helper-PPVm8Dsz.js";import"./createLucideIcon-BYzyF8e7.js";const o=l.forwardRef((r,s)=>{const{options:z=[],groups:M=[],value:h,onChange:W,placeholder:K="Select an option",searchable:y=!1,disabled:C=!1,label:j,helperText:_,error:m,loading:G=!1,clearable:oe=!1,creatable:ne=!1,onCreateOption:X,virtualized:ie=!1,virtualHeight:Z="300px",virtualItemHeight:f=42}=r,[u,p]=l.useState(!1),[c,V]=l.useState(""),[ce,ue]=l.useState(0),[de]=l.useState(void 0),A=l.useRef(null),U=l.useRef(null),P=l.useRef(null),pe=l.useRef(null),ee=l.useId(),Q=l.useId(),ae=l.useId(),te=l.useId();l.useImperativeHandle(s,()=>({focus:()=>U.current?.focus(),blur:()=>U.current?.blur(),open:()=>p(!0),close:()=>p(!1)}));const x=[...z,...M.flatMap(a=>a.options)].find(a=>a.value===h),me=()=>{if(!y||!c)return{options:z,groups:M};const a=c.toLowerCase(),t=z.filter(i=>i.label.toLowerCase().includes(a)),n=M.map(i=>({...i,options:i.options.filter(ge=>ge.label.toLowerCase().includes(a))})).filter(i=>i.options.length>0);return{options:t,groups:n}},{options:v,groups:g}=me(),w=v.length+g.flatMap(a=>a.options).length,d=ie&&w>50,Y=d?Math.floor(ce/f):0,be=d?Math.min(Y+Math.ceil(parseInt(Z)/f)+5,w):w,re=[...v.map((a,t)=>({type:"option",option:a,groupIndex:-1,optionIndex:t})),...g.flatMap((a,t)=>a.options.map((n,i)=>({type:"grouped",option:n,groupIndex:t,optionIndex:i,groupLabel:a.label})))],he=d?re.slice(Y,be):re,fe=d?Y*f:0,xe=d?w*f:"auto",le=ne&&c.trim()!==""&&!v.some(a=>a.label.toLowerCase()===c.toLowerCase())&&!g.some(a=>a.options.some(t=>t.label.toLowerCase()===c.toLowerCase())),ve=()=>{X?X(c.trim()):W?.(c.trim()),V(""),p(!1)};l.useEffect(()=>{const a=t=>{A.current&&!A.current.contains(t.target)&&(p(!1),V(""))};return u&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[u]),l.useEffect(()=>{u&&y&&P.current&&P.current.focus()},[u,y]);const B=a=>{W?.(a),p(!1),V("")};return e.jsxs("div",{className:"w-full",children:[j&&e.jsx("label",{id:ee,className:"label",children:j}),e.jsxs("div",{ref:A,className:"relative",children:[e.jsxs("button",{ref:U,type:"button",onClick:()=>!C&&p(!u),disabled:C,className:`
            input w-full flex items-center justify-between
            ${m?"border-error-400 focus:border-error-400 focus:ring-error-400":""}
            ${C?"opacity-40 cursor-not-allowed":"cursor-pointer"}
          `,role:"combobox","aria-haspopup":"listbox","aria-expanded":u,"aria-controls":Q,"aria-labelledby":j?ee:void 0,"aria-label":j?void 0:K,"aria-activedescendant":de,"aria-invalid":m?"true":void 0,"aria-describedby":m?ae:_?te:void 0,"aria-disabled":C,children:[e.jsxs("span",{className:`flex items-center gap-2 ${x?"text-ink-800":"text-ink-400"}`,children:[G&&e.jsx(se,{className:"h-4 w-4 animate-spin text-ink-500"}),!G&&x?.icon&&e.jsx("span",{children:x.icon}),x?x.label:K]}),e.jsxs("div",{className:"flex items-center gap-1",children:[oe&&h&&e.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),W?.(""),p(!1)},className:"text-ink-400 hover:text-ink-600 transition-colors p-0.5","aria-label":"Clear selection",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(ye,{className:`h-4 w-4 text-ink-500 transition-transform ${u?"rotate-180":""}`})]})]}),u&&e.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white bg-subtle-grain rounded-lg shadow-lg border border-paper-200 max-h-60 overflow-hidden animate-fade-in",children:[y&&e.jsx("div",{className:"p-2 border-b border-paper-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-ink-400"}),e.jsx("input",{ref:P,type:"text",value:c,onChange:a=>V(a.target.value),placeholder:"Search...",className:"w-full pl-9 pr-3 py-2 text-sm border border-paper-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-400 focus:border-accent-400",role:"searchbox","aria-label":"Search options","aria-autocomplete":"list","aria-controls":Q})]})}),e.jsx("div",{ref:pe,id:Q,className:"overflow-y-auto",style:{maxHeight:d?Z:"12rem"},onScroll:a=>d&&ue(a.currentTarget.scrollTop),role:"listbox","aria-label":"Available options","aria-multiselectable":"false",children:G?e.jsxs("div",{className:"px-4 py-8 flex items-center justify-center",role:"status","aria-live":"polite",children:[e.jsx(se,{className:"h-5 w-5 animate-spin text-ink-500"}),e.jsx("span",{className:"ml-2 text-sm text-ink-500",children:"Loading..."})]}):v.length===0&&g.length===0&&!le?e.jsx("div",{className:"px-4 py-3 text-sm text-ink-500 text-center",role:"status","aria-live":"polite",children:"No options found"}):e.jsxs(e.Fragment,{children:[le&&e.jsx("button",{type:"button",onClick:ve,className:"w-full flex items-center px-4 py-2.5 text-sm text-accent-700 hover:bg-accent-50 transition-colors border-b border-paper-200",children:e.jsxs("span",{className:"font-medium",children:['Create "',c,'"']})}),d?e.jsx("div",{style:{height:xe,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${fe}px)`},children:he.map(a=>{const t=a.option,n=t.value===h,i=`${a.type}-${a.groupIndex}-${a.optionIndex}-${t.value}`;return e.jsxs("button",{type:"button",onClick:()=>!t.disabled&&B(t.value),disabled:t.disabled,style:{height:`${f}px`},className:`
                                w-full flex items-center justify-between px-4 text-sm transition-colors
                                ${n?"bg-accent-50 text-accent-900":"text-ink-700"}
                                ${t.disabled?"opacity-40 cursor-not-allowed":"hover:bg-paper-50 cursor-pointer"}
                              `,role:"option","aria-selected":n,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[t.icon&&e.jsx("span",{children:t.icon}),t.label]}),n&&e.jsx(J,{className:"h-4 w-4 text-accent-600"})]},i)})})}):e.jsxs(e.Fragment,{children:[v.map(a=>{const t=a.value===h;return e.jsxs("button",{type:"button",onClick:()=>!a.disabled&&B(a.value),disabled:a.disabled,className:`
                              w-full flex items-center justify-between px-4 py-2.5 text-sm transition-colors
                              ${t?"bg-accent-50 text-accent-900":"text-ink-700"}
                              ${a.disabled?"opacity-40 cursor-not-allowed":"hover:bg-paper-50 cursor-pointer"}
                            `,role:"option","aria-selected":t,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[a.icon&&e.jsx("span",{children:a.icon}),a.label]}),t&&e.jsx(J,{className:"h-4 w-4 text-accent-600"})]},a.value)}),g.map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-ink-500 uppercase tracking-wider bg-paper-50 border-t border-b border-paper-200",children:a.label}),a.options.map(t=>{const n=t.value===h;return e.jsxs("button",{type:"button",onClick:()=>!t.disabled&&B(t.value),disabled:t.disabled,className:`
                                  w-full flex items-center justify-between px-4 py-2.5 text-sm transition-colors
                                  ${n?"bg-accent-50 text-accent-900":"text-ink-700"}
                                  ${t.disabled?"opacity-40 cursor-not-allowed":"hover:bg-paper-50 cursor-pointer"}
                                `,role:"option","aria-selected":n,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[t.icon&&e.jsx("span",{children:t.icon}),t.label]}),n&&e.jsx(J,{className:"h-4 w-4 text-accent-600"})]},t.value)})]},a.label))]})]})})]})]}),m&&e.jsx("p",{id:ae,className:"mt-2 text-xs text-error-600",role:"alert","aria-live":"assertive",children:m}),_&&!m&&e.jsx("p",{id:te,className:"mt-2 text-xs text-ink-600",children:_})]})});o.displayName="Select";try{o.displayName="Select",o.__docgenInfo={description:"",displayName:"Select",props:{options:{defaultValue:null,description:"Flat list of options",name:"options",required:!1,type:{name:"SelectOption[]"}},groups:{defaultValue:null,description:"Grouped options with section headers",name:"groups",required:!1,type:{name:"SelectOptionGroup[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},helperText:{defaultValue:null,description:"",name:"helperText",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"Show loading spinner",name:"loading",required:!1,type:{name:"boolean"}},clearable:{defaultValue:null,description:"Show clear button to reset selection",name:"clearable",required:!1,type:{name:"boolean"}},creatable:{defaultValue:null,description:"Allow creating new options (requires searchable=true)",name:"creatable",required:!1,type:{name:"boolean"}},onCreateOption:{defaultValue:null,description:"Callback when new option is created",name:"onCreateOption",required:!1,type:{name:"((inputValue: string) => void)"}},virtualized:{defaultValue:null,description:"Enable virtual scrolling for large option lists (100+ items)",name:"virtualized",required:!1,type:{name:"boolean"}},virtualHeight:{defaultValue:null,description:"Height of dropdown when virtualized (default: '300px')",name:"virtualHeight",required:!1,type:{name:"string"}},virtualItemHeight:{defaultValue:null,description:"Height of each option row in pixels (default: 42)",name:"virtualItemHeight",required:!1,type:{name:"number"}}}}}catch{}const $e={title:"Forms/Select",component:o,parameters:{layout:"centered"},tags:["autodocs"],decorators:[r=>e.jsx("div",{style:{minWidth:"400px"},children:e.jsx(r,{})})],argTypes:{size:{control:"select",options:["sm","md","lg"]}}},b=[{value:"apple",label:"Apple"},{value:"banana",label:"Banana"},{value:"orange",label:"Orange"},{value:"grape",label:"Grape"},{value:"watermelon",label:"Watermelon"}],S=[{value:"us",label:"United States"},{value:"uk",label:"United Kingdom"},{value:"ca",label:"Canada"},{value:"au",label:"Australia"},{value:"de",label:"Germany"},{value:"fr",label:"France"},{value:"jp",label:"Japan"},{value:"cn",label:"China"}],je=[{value:"admin",label:"Administrator",description:"Full system access"},{value:"manager",label:"Manager",description:"Manage team and projects"},{value:"user",label:"User",description:"Standard access"},{value:"guest",label:"Guest",description:"Limited access"}],N={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Select a Fruit",options:b,value:r,onChange:s,placeholder:"Choose a fruit..."})}},O={render:()=>{const[r,s]=l.useState("banana");return e.jsx(o,{label:"Favorite Fruit",options:b,value:r,onChange:s})}},k={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Country",options:S,value:r,onChange:s,required:!0,placeholder:"Select your country..."})}},I={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Country",options:S,value:r,onChange:s,error:"Please select a country"})}},L={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Country",options:S,value:r,onChange:s,helperText:"Select your country of residence"})}},q={render:()=>e.jsx(o,{label:"Disabled Select",options:b,value:"apple",onChange:()=>{},disabled:!0})},F={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Search Countries",options:S,value:r,onChange:s,searchable:!0,placeholder:"Search for a country..."})}},R={render:()=>{const[r,s]=l.useState("us");return e.jsx(o,{label:"Country",options:S,value:r,onChange:s,clearable:!0,placeholder:"Select a country..."})}},$={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"User Role",options:je,value:r,onChange:s,placeholder:"Select a role..."})}},H={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Small Select",options:b,value:r,onChange:s,size:"sm",placeholder:"Choose..."})}},T={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Large Select",options:b,value:r,onChange:s,size:"lg",placeholder:"Choose..."})}},D={render:()=>{const[r,s]=l.useState("");return e.jsx(o,{label:"Loading Select",options:[],value:r,onChange:s,loading:!0,placeholder:"Loading options..."})}},E={render:()=>{const[r,s]=l.useState([]);return e.jsx(o,{label:"Select Fruits",options:b,value:r,onChange:s,multiple:!0,placeholder:"Select one or more fruits..."})}};N.parameters={...N.parameters,docs:{...N.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Select a Fruit" options={basicOptions} value={value} onChange={setValue} placeholder="Choose a fruit..." />;
  }
}`,...N.parameters?.docs?.source}}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('banana');
    return <Select label="Favorite Fruit" options={basicOptions} value={value} onChange={setValue} />;
  }
}`,...O.parameters?.docs?.source}}};k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Country" options={countryOptions} value={value} onChange={setValue} required placeholder="Select your country..." />;
  }
}`,...k.parameters?.docs?.source}}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Country" options={countryOptions} value={value} onChange={setValue} error="Please select a country" />;
  }
}`,...I.parameters?.docs?.source}}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Country" options={countryOptions} value={value} onChange={setValue} helperText="Select your country of residence" />;
  }
}`,...L.parameters?.docs?.source}}};q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:`{
  render: () => {
    return <Select label="Disabled Select" options={basicOptions} value="apple" onChange={() => {}} disabled />;
  }
}`,...q.parameters?.docs?.source}}};F.parameters={...F.parameters,docs:{...F.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Search Countries" options={countryOptions} value={value} onChange={setValue} searchable placeholder="Search for a country..." />;
  }
}`,...F.parameters?.docs?.source}}};R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('us');
    return <Select label="Country" options={countryOptions} value={value} onChange={setValue} clearable placeholder="Select a country..." />;
  }
}`,...R.parameters?.docs?.source}}};$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="User Role" options={roleOptions} value={value} onChange={setValue} placeholder="Select a role..." />;
  }
}`,...$.parameters?.docs?.source}}};H.parameters={...H.parameters,docs:{...H.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Small Select" options={basicOptions} value={value} onChange={setValue} size="sm" placeholder="Choose..." />;
  }
}`,...H.parameters?.docs?.source}}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Large Select" options={basicOptions} value={value} onChange={setValue} size="lg" placeholder="Choose..." />;
  }
}`,...T.parameters?.docs?.source}}};D.parameters={...D.parameters,docs:{...D.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [value, setValue] = useState('');
    return <Select label="Loading Select" options={[]} value={value} onChange={setValue} loading placeholder="Loading options..." />;
  }
}`,...D.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [values, setValues] = useState<string[]>([]);
    return <Select label="Select Fruits" options={basicOptions} value={values} onChange={setValues} multiple placeholder="Select one or more fruits..." />;
  }
}`,...E.parameters?.docs?.source}}};const He=["Default","WithValue","Required","WithError","WithHelperText","Disabled","Searchable","Clearable","WithDescriptions","Small","Large","Loading","MultiSelect"];export{R as Clearable,N as Default,q as Disabled,T as Large,D as Loading,E as MultiSelect,k as Required,F as Searchable,H as Small,$ as WithDescriptions,I as WithError,L as WithHelperText,O as WithValue,He as __namedExportsOrder,$e as default};

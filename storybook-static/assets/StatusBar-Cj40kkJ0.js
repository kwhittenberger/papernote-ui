import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as o}from"./iframe-B3mi8TDU.js";import{X as b}from"./x-Cnr4OZhu.js";import{I as v}from"./info-QZIFEd9F.js";import{T as w}from"./triangle-alert-FS4IY-Fg.js";import{C as S}from"./circle-alert-B6UEkZ9R.js";import{C as D}from"./circle-check-big-BJiZfPxt.js";class C{constructor(){this.messages=[],this.listeners=new Set}addMessage(s,i,n={}){const c=`status_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={id:c,type:s,message:i,timestamp:new Date,autoHide:n.autoHide??!0,autoHideDelay:n.autoHideDelay??5e3,persistent:n.persistent??!1};return this.messages=[a,...this.messages],this.notifyListeners(),a.autoHide&&!a.persistent&&setTimeout(()=>{this.removeMessage(c)},a.autoHideDelay),c}removeMessage(s){this.messages=this.messages.filter(i=>i.id!==s),this.notifyListeners()}clearAll(){this.messages=[],this.notifyListeners()}clearByType(s){this.messages=this.messages.filter(i=>i.type!==s),this.notifyListeners()}subscribe(s){return this.listeners.add(s),()=>this.listeners.delete(s)}notifyListeners(){this.listeners.forEach(s=>s([...this.messages]))}getMessages(){return[...this.messages]}}const x=new C,M=r=>{switch(r){case"success":return e.jsx(D,{className:"h-4 w-4"});case"error":return e.jsx(S,{className:"h-4 w-4"});case"warning":return e.jsx(w,{className:"h-4 w-4"});case"info":return e.jsx(v,{className:"h-4 w-4"})}},_=r=>{switch(r){case"success":return"bg-success-50 text-success-800 border-success-200";case"error":return"bg-error-50 text-error-800 border-error-200";case"warning":return"bg-warning-50 text-warning-800 border-warning-200";case"info":return"bg-primary-50 text-primary-800 border-primary-200"}},g=({className:r="",maxMessages:s=3,defaultAutoHideDelay:i=5e3,message:n="Ready",connectionStatus:c="online",showConnectionStatus:a=!0,showTime:l=!0})=>{const[u,h]=o.useState([]),[y,j]=o.useState(new Date);o.useEffect(()=>x.subscribe(h),[]),o.useEffect(()=>{if(!l)return;const t=setInterval(()=>{j(new Date)},1e3);return()=>clearInterval(t)},[l]);const N=t=>{x.removeMessage(t)},m=()=>{switch(c){case"online":return e.jsx("div",{className:"w-2 h-2 rounded-full bg-success-500",title:"Connected"});case"offline":return e.jsx("div",{className:"w-2 h-2 rounded-full bg-error-500",title:"Disconnected"});case"connecting":return e.jsx("div",{className:"w-2 h-2 rounded-full bg-warning-500 animate-pulse",title:"Connecting..."});default:return null}},d=()=>{switch(c){case"online":return"Connected";case"offline":return"Offline";case"connecting":return"Connecting...";default:return""}},f=()=>y.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),p=u.slice(0,s);return e.jsx("div",{className:`h-8 bg-paper-200 border-t border-paper-300 px-4 flex items-center text-xs text-ink-700 flex-shrink-0 shadow-md ${r}`,children:p.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[m(),e.jsx("span",{className:"text-xs font-medium",children:d()})]}),n&&e.jsxs(e.Fragment,{children:[a&&e.jsx("span",{className:"text-paper-500",children:"|"}),e.jsx("span",{className:"font-medium",children:n})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-1 justify-center",children:[p.map(t=>e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-0.5 rounded ${_(t.type)}`,children:[M(t.type),e.jsx("span",{className:"text-xs font-medium",children:t.message}),!t.persistent&&e.jsx("button",{onClick:()=>N(t.id),className:"ml-1 text-current opacity-70 hover:opacity-100 transition-opacity","aria-label":"Dismiss message",title:"Dismiss message",children:e.jsx(b,{className:"h-3 w-3"})})]},t.id)),u.length>s&&e.jsxs("span",{className:"text-xs text-ink-500",children:["+",u.length-s," more"]})]}),e.jsx("div",{className:"flex items-center gap-3",children:l&&e.jsx("span",{className:"font-mono text-xs text-ink-600",children:f()})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[m(),e.jsx("span",{className:"text-xs font-medium",children:d()})]}),n&&e.jsxs(e.Fragment,{children:[a&&e.jsx("span",{className:"text-paper-500",children:"|"}),e.jsx("span",{className:"font-medium",children:n})]})]}),e.jsx("div",{className:"flex items-center gap-3 ml-auto",children:l&&e.jsx("span",{className:"font-mono text-xs text-ink-600",children:f()})})]})})};try{g.displayName="StatusBar",g.__docgenInfo={description:"",displayName:"StatusBar",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},maxMessages:{defaultValue:{value:"3"},description:"",name:"maxMessages",required:!1,type:{name:"number"}},defaultAutoHideDelay:{defaultValue:{value:"5000"},description:"",name:"defaultAutoHideDelay",required:!1,type:{name:"number"}},message:{defaultValue:{value:"Ready"},description:"Status message to display when no toast messages",name:"message",required:!1,type:{name:"string"}},connectionStatus:{defaultValue:{value:"online"},description:"Connection status (online/offline/connecting)",name:"connectionStatus",required:!1,type:{name:"enum",value:[{value:'"online"'},{value:'"offline"'},{value:'"connecting"'}]}},showConnectionStatus:{defaultValue:{value:"true"},description:"Show connection indicator",name:"showConnectionStatus",required:!1,type:{name:"boolean"}},showTime:{defaultValue:{value:"true"},description:"Show current time",name:"showTime",required:!1,type:{name:"boolean"}}}}}catch{}export{g as S};
